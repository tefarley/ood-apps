var v="ood_editor_store_";function i(t){return`${v}${t}`}function y(t,n){return localStorage.setItem(i(t),n),null}function b(t){return localStorage.getItem(i(t))}function s(t,n){return y(i(t),n)}function a(t){return b(i(t))}jQuery(function(){$('[data-toggle="tooltip"]').tooltip();let t=document.querySelector("#editor"),n=t.dataset.api,u=t.dataset.path;if($("#editor").length){let d=function(){e.on("change",function(){e.session.getUndoManager().dirtyCounter++,r()}),e.session.getUndoManager().markClean(),$("#save-button").prop("disabled",!0),e.focus()},p=function(){$("#save-button").prop("disabled",e.session.getUndoManager().isClean())},r=function(){f&&e.session.getUndoManager().markClean(),p(),window.onbeforeunload=function(o){if(!e.session.getUndoManager().isClean())return"You have unsaved changes!"}},l=function(){$("#save-icon").toggleClass("glyphicon-save"),$("#save-icon").toggleClass("glyphicon-refresh"),$("#save-icon").toggleClass("glyphicon-spin")},c=function(){$("#save-icon").toggleClass("glyphicon-save"),$("#save-icon").toggleClass("glyphicon-saved")},g=function(){var o=$("#keybindings option:selected").val();o=="default"&&(o=null),e.setKeyboardHandler(o)},S=function(){var o=ace.require("ace/ext/modelist").getModeForPath(u);$("#mode").val(o.name),e.session.setMode(o.mode)},h=function(){$("#keybindings").val(a("keybindings")||"default"),g(),$("#fontsize").val(a("fontsize")||"12px"),e.setFontSize($("#fontsize option:selected").val()),$("#mode").val(a("mode")||"text"),e.session.setMode("ace/mode/"+$("#mode option:selected").val()),$("#theme").val(a("theme")||"ace/theme/solarized_light"),e.setTheme($("#theme option:selected").val()),$("#wordwrap").prop("checked",a("wordwrap")==="true"),e.getSession().setUseWrapMode($("#wordwrap").is(":checked"))};$("#error").hide();let e=ace.edit("editor"),f=!1;h(),d(),r(),e.setReadOnly(!1),$("#fontsize").on("change",function(){e.setFontSize($("#fontsize option:selected").val()),s("fontsize",$("#fontsize option:selected").val())}),$("#keybindings").on("change",function(){g(),s("keybindings",$("#keybindings option:selected").val())}),$("#theme").on("change",function(){e.setTheme($("#theme option:selected").val()),s("theme",$("#theme option:selected").val())}),$("#mode").on("change",function(){e.getSession().setMode("ace/mode/"+$("#mode option:selected").val()),s("mode",$("#mode option:selected").val())}),$("#wordwrap").on("change",function(){e.getSession().setUseWrapMode(this.checked),s("wordwrap",$("#wordwrap").is(":checked"))}),$("#save-button").on("click",function(){n!==""?($("#save-button").prop("disabled",!0),l(),$.ajax({url:n,type:"PUT",data:e.getValue(),headers:{"Content-Type":"text/plain","X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},success:function(o){l(),c(),setTimeout(function(){c()},2e3),e.session.getUndoManager().markClean(),$("#save-button").prop("disabled",e.session.getUndoManager().isClean()),r()},error:function(o,k,m){alert(`An error occured attempting to save this file!
`+m),l()}})):console.log("Can't save this!")}),d()}});
//# sourceMappingURL=editor.js.map
