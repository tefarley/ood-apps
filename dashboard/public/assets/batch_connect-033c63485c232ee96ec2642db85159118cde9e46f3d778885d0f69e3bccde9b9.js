var w="batch_connect_session_context",j=new RegExp(`${w}_([\\w\\-]+)`);var C=[],F={},_=[],y=[],b={},m={},E={},k={},V=/[-_]([a-z])|([_-][0-9])|([\/])/g,H=!0;function z(e){return`${w}_${e.toLowerCase()}`}function K(e){let n=e.match(j);return n.length>=1?n[1]:""}function M(e){let n=e.toLowerCase(),t=n.charAt(0).toUpperCase(),s=n.slice(1).replace(V,function(i,o,a,r){if(o)return o.toUpperCase();if(a)return a.replace("_","-");if(r)return"_"});return`${t}${s}`}function f(e){if(e===void 0)return;let n="";return e.split("").forEach((t,s)=>{if(t==="-"||t==="_")n+="_";else if(s==0)n+=t.toLowerCase();else if(t==t.toUpperCase()&&isNaN(t)){let i=s+1!==e.length?e[s+1]===e[s+1].toUpperCase():!0;e[s-1]==="_"||i?n+=t.toLowerCase():n+=`_${t.toLowerCase()}`}else n+=t}),n}function U(e){e.each((n,t)=>{C.push(M(K(t.id))),F[t.id]=[]})}function q(){let e=$(`[id^=${w}]`);U(e),e.each((n,t)=>{if(t.type=="select-one"){let s=`#${t.id} option`;$(s).each((o,a)=>{let r=$(`${s}[value='${a.value}']`).data(),u=Object.keys(r);u.length!==0&&u.forEach(l=>{if(l.startsWith("optionFor")){let c=l.replace(/^optionFor/,"");D(p(c),t.id)}else l.startsWith("max")||l.startsWith("min")?R(t.id,a.value,l,r[l]):l.startsWith("set")?N(t.id,a.value,l,r[l]):l.startsWith("hide")&&A(t.id,a.value,l,r[l])})})}})}function A(e,n,t,s){let i=p(t.replace(/^hide/,""));k[e]===void 0&&(k[e]=new g(i,"option_value")),k[e].put(i,n,s),b[e]===void 0&&(b[e]=[]),b[e].includes(i)||($(`#${e}`).on("change",r=>{W(r,i)}),b[e].push(i)),W({target:document.querySelector(`#${e}`)},i)}function R(e,n,t,s){e=String(e||""),s=parseInt(s);let i=Q(t),o=i.subjectId;if(o===void 0)return;let a=i.predicateId,r=i.predicateValue,u=`${e}_${o}`;m[u]===void 0&&(m[u]=new g(e,a)),m[u].put(n,r,{[Z(t)]:s});let c=`${o}_${e}_${a}`;_.includes(c)||($(`#${e}`).on("change",h=>{L(h,o,a)}),_.push(c)),c=`${o}_${a}_${e}`,a!==void 0&&!_.includes(c)&&($(`#${a}`).on("change",h=>{L(h,o,e)}),_.push(c)),L({target:document.querySelector(`#${e}`)},o,a)}function N(e,n,t,s){let i=t.replace(/^set/,""),o=String(p(i));if(o==="undefined")return;let a=`${o}_${e}`;E[a]===void 0&&(E[a]=new g(e,void 0)),E[a].put(n,void 0,s),y.includes(a)||($(`#${e}`).on("change",l=>{O(l,o)}),y.push(a)),O({target:document.querySelector(`#${e}`)},o)}function O(e,n){let t=e.target.value,s=`${n}_${e.target.id}`,i=E[s];if(i===void 0)return;let o=i.get(t,void 0);if(o!==void 0){let a=$(`#${n}`);a.attr("value",o),a.val(o)}}var g=class{constructor(n,t){this.x=n,this.xIdxLookup={},this.y=t,this.yIdxLookup={},this.table=t===void 0?[]:[[]]}put(n,t,s){if(!n)return;n=f(n),t=f(t),this.xIdxLookup[n]===void 0&&(this.xIdxLookup[n]=Object.keys(this.xIdxLookup).length),t&&this.yIdxLookup[t]===void 0&&(this.yIdxLookup[t]=Object.keys(this.yIdxLookup).length);let i=this.xIdxLookup[n],o=this.yIdxLookup[t];if(this.table[i]===void 0&&(this.table[i]=t===void 0?void 0:[]),o===void 0)if(this.table[i]===void 0)this.table[i]=s;else{let a=this.table[i],r=s;typeof r=="string"&&typeof a=="string"?this.table[i]=r:this.table[i]=Object.assign(a,r)}else if(this.table[i][o]===void 0)this.table[i][o]=s;else{let a=this.table[i][o],r=s;typeof r=="string"&&typeof a=="string"?this.table[i][o]=r:this.table[i][o]=Object.assign(a,r)}}get(n,t){let s=this.xIdxLookup[f(n)],i=this.yIdxLookup[f(t)];if(this.table[s]!==void 0)return t===void 0?this.table[s]:this.table[s][i]}};function W(e,n){let t=e.target.value,s=e.target.id,i;if($(`#${n}`).parents().each(function(a,r){if(r.classList.contains("form-group"))return i=$(r),!1}),i===void 0||i.length<=0)return;let o=k[s].get(n,t);o===void 0&&!H?i.show():o===!0&&i.hide()}function L(e,n,t){let s,i,o=`${e.target.id}_${n}`;m[o]===void 0&&(o=`${t}_${n}`);let a=m[o];e.target.id==a.x?(s=f(e.target.value),i=f($(`#${t}`).val())):(i=f(e.target.value),s=f($(`#${t}`).val()));let r=$(`#${n}`),u=a.get(s,i),l={min:parseInt(r.attr("min")),max:parseInt(r.attr("max"))};["max","min"].forEach(d=>{u&&u[d]!==void 0&&r.attr(d,u[d])});let c=T(parseInt(r.val()),l,u);c!==void 0&&(r.attr("value",c),r.val(c))}function T(e,n,t){if(t!==void 0)return e===n.min?t.min:e===n.max?t.max:e<=t.min?t.min:e>=t.max?t.max:void 0}function D(e,n){if(String(e||"").length==0||F[e].includes(n))return;let s=$(`#${e}`);n&&s&&(F[e].push(n),s.on("change",i=>{S(i,n)}),S({target:document.querySelector(`#${e}`)},n))}function Q(e){let n,t,s,i;e.startsWith("min")?n=e.replace(/^min/,""):e.startsWith("max")&&(n=e.replace(/^max/,""));let o=n.match(/^(\w+)For(\w+)$/);if(o==null)i=p(n);else if(o.length==3){let a=o[1],r=o[2];i=p(a);let u=r.split(/(?=[A-Z])/);if(u&&u.length>=2)if(u.length==2)t=p(u[0]),s=u[1];else{let l="",c=!1;u.forEach((d,h)=>{if(c)return;l=`${l}${d}`;let x=p(l);x!==void 0&&(c=!0,t=x,s=u.slice(h+1).join(""))})}}return{subjectId:i,predicateId:t,predicateValue:f(s)}}function Z(e){return e.startsWith("min")?"min":e.startsWith("max")?"max":null}function p(e){if(elements=C.map(n=>{let t=e.match(`^${n}{1}`);if(t&&t.length>=1){let s=f(t[0]);return z(s)}}).filter(n=>n!==void 0),elements.length!=0){if(elements.length==1)return elements[0];if(elements.length>1){let n=f(e);return elements.filter(t=>t.endsWith(n))[0]}}}function P(e){return C.map(n=>{let t=e.match(`^optionFor${n}`);if(t&&t.length>=1)return n}).filter(n=>n!==void 0)[0]}function S(e,n){let t=$(`#${n} option`),s;if(t.each(function(i,o){let a=v(n,o),r=a.data(),u=!1;for(let[l,c]of Object.entries(r)){let d=P(l),h=p(l.replace(/^optionFor/,""));if(!l.startsWith("optionFor")||h===void 0)continue;let x=M($(`#${h}`)[0].value);if(u=r[`optionFor${d}${x}`]===!1,u===!0)break}u?(a.hide(),a.prop("disabled",!0),a.prop("selected")&&(a.prop("selected",!1),s=a.text())):(a.show(),a.prop("disabled",!1))}),s!==void 0){let i=$(`#${n} option[value='${s}']`),o;i.length>1&&i.each((a,r)=>{if(r.style.display===""){o=v(n,r);return}}),o===void 0&&(i=$(`#${n} option`),i.each((a,r)=>{o===void 0&&r.style.display===""&&(o=v(n,r))})),o!==void 0&&o.prop("selected",!0)}$(`#${n}`).trigger("change")}function v(e,n){let t=$(`#${e} option[value='${n.value}']`);return t.length>1&&t.each((s,i)=>{if(n.attributes==i.attributes){t=$(i);return}}),t}jQuery(function(){q(),H=!1});
//# sourceMappingURL=/pun/sys/dashboard/assets/batch_connect.js-fbd4cb6754bafa91262bcbc55e92edd48d4a5eb607b572a92fa018634656c982.map
//!
;
