{"version":3,"sources":["OneDrive.jsx"],"names":["packageJson","locale","OneDrive","UIPlugin","constructor","uppy","opts","id","Provider","initPlugin","title","icon","provider","companionUrl","companionHeaders","companionCookiesRule","pluginId","defaultLocale","i18nInit","i18n","onFirstRender","bind","render","install","view","ProviderViews","target","mount","uninstall","tearDown","unmount","Promise","all","fetchPreAuthToken","getFolder","state","VERSION","version"],"mappings":";;AAAA;;AAEA;;AACA;;AACA;;MAEOA,W;;;;MACAC,M;;AAEQ,MAAMC,QAAN,SAAuBC,cAAvB,CAAgC;AAG7CC,EAAAA,WAAW,CAAEC,IAAF,EAAQC,IAAR,EAAc;AACvB,UAAMD,IAAN,EAAYC,IAAZ;AACA,SAAKC,EAAL,GAAU,KAAKD,IAAL,CAAUC,EAAV,IAAgB,UAA1B;;AACAC,8BAASC,UAAT,CAAoB,IAApB,EAA0BH,IAA1B;;AACA,SAAKI,KAAL,GAAa,KAAKJ,IAAL,CAAUI,KAAV,IAAmB,UAAhC;;AACA,SAAKC,IAAL,GAAY,MACV;AAAK,qBAAY,MAAjB;AAAwB,MAAA,SAAS,EAAC,OAAlC;AAA0C,MAAA,KAAK,EAAC,IAAhD;AAAqD,MAAA,MAAM,EAAC,IAA5D;AAAiE,MAAA,OAAO,EAAC;AAAzE,OACE;AAAG,MAAA,IAAI,EAAC,MAAR;AAAe,MAAA,QAAQ,EAAC;AAAxB,OACE;AAAM,MAAA,SAAS,EAAC,qBAAhB;AAAsC,MAAA,KAAK,EAAC,IAA5C;AAAiD,MAAA,MAAM,EAAC,IAAxD;AAA6D,MAAA,EAAE,EAAC,IAAhE;AAAqE,MAAA,IAAI,EAAC;AAA1E,MADF,EAEE;AAAG,MAAA,IAAI,EAAC,MAAR;AAAe,MAAA,QAAQ,EAAC;AAAxB,OACE;AAAM,MAAA,CAAC,EAAC;AAAR,MADF,EAEE;AAAM,MAAA,CAAC,EAAC;AAAR,MAFF,CAFF,CADF,CADF;;AAYA,SAAKC,QAAL,GAAgB,IAAIJ,yBAAJ,CAAaH,IAAb,EAAmB;AACjCQ,MAAAA,YAAY,EAAE,KAAKP,IAAL,CAAUO,YADS;AAEjCC,MAAAA,gBAAgB,EAAE,KAAKR,IAAL,CAAUQ,gBAFK;AAGjCC,MAAAA,oBAAoB,EAAE,KAAKT,IAAL,CAAUS,oBAHC;AAIjCH,MAAAA,QAAQ,EAAE,UAJuB;AAKjCI,MAAAA,QAAQ,EAAE,KAAKT;AALkB,KAAnB,CAAhB;AAQA,SAAKU,aAAL,GAAqBhB,MAArB;AAEA,SAAKiB,QAAL;AACA,SAAKR,KAAL,GAAa,KAAKS,IAAL,CAAU,oBAAV,CAAb;AAEA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYD,IAAZ,CAAiB,IAAjB,CAAd;AACD;;AAEDE,EAAAA,OAAO,GAAI;AACT,SAAKC,IAAL,GAAY,IAAIC,4BAAJ,CAAkB,IAAlB,EAAwB;AAClCb,MAAAA,QAAQ,EAAE,KAAKA;AADmB,KAAxB,CAAZ;AAIA,UAAM;AAAEc,MAAAA;AAAF,QAAa,KAAKpB,IAAxB;;AACA,QAAIoB,MAAJ,EAAY;AACV,WAAKC,KAAL,CAAWD,MAAX,EAAmB,IAAnB;AACD;AACF;;AAEDE,EAAAA,SAAS,GAAI;AACX,SAAKJ,IAAL,CAAUK,QAAV;AACA,SAAKC,OAAL;AACD;;AAEDV,EAAAA,aAAa,GAAI;AACf,WAAOW,OAAO,CAACC,GAAR,CAAY,CACjB,KAAKpB,QAAL,CAAcqB,iBAAd,EADiB,EAEjB,KAAKT,IAAL,CAAUU,SAAV,EAFiB,CAAZ,CAAP;AAID;;AAEDZ,EAAAA,MAAM,CAAEa,KAAF,EAAS;AACb,WAAO,KAAKX,IAAL,CAAUF,MAAV,CAAiBa,KAAjB,CAAP;AACD;;AA9D4C;;AAA1BjC,Q,CACZkC,O,GAAUpC,WAAW,CAACqC,O;iBADVnC,Q","sourcesContent":["import { h } from 'preact'\n\nimport { UIPlugin } from '@uppy/core'\nimport { Provider } from '@uppy/companion-client'\nimport { ProviderViews } from '@uppy/provider-views'\n\nimport packageJson from '../package.json'\nimport locale from './locale.js'\n\nexport default class OneDrive extends UIPlugin {\n  static VERSION = packageJson.version\n\n  constructor (uppy, opts) {\n    super(uppy, opts)\n    this.id = this.opts.id || 'OneDrive'\n    Provider.initPlugin(this, opts)\n    this.title = this.opts.title || 'OneDrive'\n    this.icon = () => (\n      <svg aria-hidden=\"true\" focusable=\"false\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <rect className=\"uppy-ProviderIconBg\" width=\"32\" height=\"32\" rx=\"16\" fill=\"#0262C0\" />\n          <g fill=\"#FFF\" fillRule=\"nonzero\">\n            <path d=\"M24.157 22s1.492-.205 1.79-1.655a2.624 2.624 0 0 0 .03-.878c-.22-1.64-1.988-2.01-1.988-2.01s.307-1.765-1.312-2.69c-1.62-.925-3.1 0-3.1 0S18.711 13 16.366 13c-3.016 0-3.519 3.448-3.519 3.448S10 16.618 10 19.14c0 2.523 2.597 2.86 2.597 2.86h11.56z\" />\n            <path d=\"M9.421 19.246c0-2.197 1.606-3.159 2.871-3.472.44-1.477 1.654-3.439 4.135-3.439H16.445c1.721 0 2.79.823 3.368 1.476a3.99 3.99 0 0 1 1.147-.171h.01l.03.002C21.017 13.5 20.691 10 16.757 10c-2.69 0-3.639 2.345-3.639 2.345s-1.95-1.482-3.955.567c-1.028 1.052-.79 2.669-.79 2.669S6 15.824 6 18.412C6 20.757 8.452 21 8.452 21h1.372a3.77 3.77 0 0 1-.403-1.754z\" />\n          </g>\n        </g>\n      </svg>\n    )\n\n    this.provider = new Provider(uppy, {\n      companionUrl: this.opts.companionUrl,\n      companionHeaders: this.opts.companionHeaders,\n      companionCookiesRule: this.opts.companionCookiesRule,\n      provider: 'onedrive',\n      pluginId: this.id,\n    })\n\n    this.defaultLocale = locale\n\n    this.i18nInit()\n    this.title = this.i18n('pluginNameOneDrive')\n\n    this.onFirstRender = this.onFirstRender.bind(this)\n    this.render = this.render.bind(this)\n  }\n\n  install () {\n    this.view = new ProviderViews(this, {\n      provider: this.provider,\n    })\n\n    const { target } = this.opts\n    if (target) {\n      this.mount(target, this)\n    }\n  }\n\n  uninstall () {\n    this.view.tearDown()\n    this.unmount()\n  }\n\n  onFirstRender () {\n    return Promise.all([\n      this.provider.fetchPreAuthToken(),\n      this.view.getFolder(),\n    ])\n  }\n\n  render (state) {\n    return this.view.render(state)\n  }\n}\n"]}