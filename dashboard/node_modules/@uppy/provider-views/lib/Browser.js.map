{"version":3,"sources":["Browser.jsx"],"names":["classNames","remoteFileObjToLocal","Filter","FooterActions","Item","VIRTUAL_SHARED_DIR","Browser","props","currentSelection","folders","files","uppyFiles","viewType","headerComponent","showBreadcrumbs","isChecked","toggleCheckbox","recordShiftKeyPress","handleScroll","showTitles","i18n","validateRestrictions","showFilter","filterQuery","filterInput","getNextFolder","cancel","done","columns","selected","length","map","folder","id","title","name","getItemIcon","icon","event","type","isDisabled","loading","isCheckboxDisabled","handleFolderClick","file","validated","author","result","restrictionReason","reason"],"mappings":"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","sourcesContent":["import { h } from 'preact'\n\nimport classNames from 'classnames'\n\nimport remoteFileObjToLocal from '@uppy/utils/lib/remoteFileObjToLocal'\n\nimport Filter from './Filter.jsx'\nimport FooterActions from './FooterActions.jsx'\nimport Item from './Item/index.jsx'\n\nconst VIRTUAL_SHARED_DIR = 'shared-with-me'\n\nfunction Browser (props) {\n  const {\n    currentSelection,\n    folders,\n    files,\n    uppyFiles,\n    viewType,\n    headerComponent,\n    showBreadcrumbs,\n    isChecked,\n    toggleCheckbox,\n    recordShiftKeyPress,\n    handleScroll,\n    showTitles,\n    i18n,\n    validateRestrictions,\n    showFilter,\n    filterQuery,\n    filterInput,\n    getNextFolder,\n    cancel,\n    done,\n    columns,\n  } = props\n\n  const selected = currentSelection.length\n\n  return (\n    <div\n      className={classNames(\n        'uppy-ProviderBrowser',\n        `uppy-ProviderBrowser-viewType--${viewType}`,\n      )}\n    >\n      <div className=\"uppy-ProviderBrowser-header\">\n        <div\n          className={classNames(\n            'uppy-ProviderBrowser-headerBar',\n            !showBreadcrumbs && 'uppy-ProviderBrowser-headerBar--simple',\n          )}\n        >\n          {headerComponent}\n        </div>\n      </div>\n\n      {showFilter && (\n        <Filter\n          i18n={i18n}\n          filterQuery={filterQuery}\n          filterInput={filterInput}\n        />\n      )}\n\n      {(() => {\n        if (!folders.length && !files.length) {\n          return (\n            <div className=\"uppy-Provider-empty\">\n              {i18n('noFilesFound')}\n            </div>\n          )\n        }\n\n        return (\n          <div className=\"uppy-ProviderBrowser-body\">\n            <ul\n              className=\"uppy-ProviderBrowser-list\"\n              onScroll={handleScroll}\n              role=\"listbox\"\n              // making <ul> not focusable for firefox\n              tabIndex=\"-1\"\n            >\n              {folders.map((folder) => {\n                return Item({\n                  columns,\n                  showTitles,\n                  viewType,\n                  i18n,\n                  id: folder.id,\n                  title: folder.name,\n                  getItemIcon: () => folder.icon,\n                  isChecked: isChecked(folder),\n                  toggleCheckbox: (event) => toggleCheckbox(event, folder),\n                  recordShiftKeyPress,\n                  type: 'folder',\n                  isDisabled: isChecked(folder)?.loading,\n                  isCheckboxDisabled: folder.id === VIRTUAL_SHARED_DIR,\n                  handleFolderClick: () => getNextFolder(folder),\n                })\n              })}\n\n              {files.map((file) => {\n                const validated = validateRestrictions(\n                  remoteFileObjToLocal(file),\n                  [...uppyFiles, ...currentSelection],\n                )\n\n                return Item({\n                  id: file.id,\n                  title: file.name,\n                  author: file.author,\n                  getItemIcon: () => file.icon,\n                  isChecked: isChecked(file),\n                  toggleCheckbox: (event) => toggleCheckbox(event, file),\n                  recordShiftKeyPress,\n                  columns,\n                  showTitles,\n                  viewType,\n                  i18n,\n                  type: 'file',\n                  isDisabled: !validated.result && !isChecked(file),\n                  restrictionReason: validated.reason,\n                })\n              })}\n            </ul>\n          </div>\n        )\n      })()}\n\n      {selected > 0 && (\n        <FooterActions\n          selected={selected}\n          done={done}\n          cancel={cancel}\n          i18n={i18n}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default Browser\n"]}