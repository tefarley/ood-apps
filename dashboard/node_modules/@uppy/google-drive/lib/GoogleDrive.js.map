{"version":3,"sources":["GoogleDrive.jsx"],"names":["packageJson","DriveProviderViews","locale","GoogleDrive","UIPlugin","constructor","uppy","opts","id","title","Provider","initPlugin","icon","provider","companionUrl","companionHeaders","companionKeysParams","companionCookiesRule","pluginId","defaultLocale","i18nInit","i18n","onFirstRender","bind","render","install","view","target","mount","uninstall","tearDown","unmount","Promise","all","fetchPreAuthToken","getFolder","state","VERSION","version"],"mappings":";;AAAA;;AACA;;AACA;;MAEOA,W;;;;MACAC,kB;;MACAC,M;;AAEQ,MAAMC,WAAN,SAA0BC,cAA1B,CAAmC;AAGhDC,EAAAA,WAAW,CAAEC,IAAF,EAAQC,IAAR,EAAc;AACvB,UAAMD,IAAN,EAAYC,IAAZ;AACA,SAAKC,EAAL,GAAU,KAAKD,IAAL,CAAUC,EAAV,IAAgB,aAA1B;AACA,SAAKC,KAAL,GAAa,KAAKF,IAAL,CAAUE,KAAV,IAAmB,cAAhC;;AACAC,8BAASC,UAAT,CAAoB,IAApB,EAA0BJ,IAA1B;;AACA,SAAKE,KAAL,GAAa,KAAKF,IAAL,CAAUE,KAAV,IAAmB,cAAhC;;AACA,SAAKG,IAAL,GAAY,MACV;AACE,qBAAY,MADd;AAEE,MAAA,SAAS,EAAC,OAFZ;AAGE,MAAA,KAAK,EAAC,IAHR;AAIE,MAAA,MAAM,EAAC,IAJT;AAKE,MAAA,OAAO,EAAC;AALV,OAOE;AAAG,MAAA,IAAI,EAAC,MAAR;AAAe,MAAA,QAAQ,EAAC;AAAxB,OACE;AACE,MAAA,SAAS,EAAC,qBADZ;AAEE,MAAA,IAAI,EAAC,SAFP;AAGE,MAAA,KAAK,EAAC,IAHR;AAIE,MAAA,MAAM,EAAC,IAJT;AAKE,MAAA,EAAE,EAAC;AALL,MADF,EAQE;AACE,MAAA,CAAC,EAAC,6JADJ;AAEE,MAAA,IAAI,EAAC;AAFP,MARF,CAPF,CADF;;AAwBA,SAAKC,QAAL,GAAgB,IAAIH,yBAAJ,CAAaJ,IAAb,EAAmB;AACjCQ,MAAAA,YAAY,EAAE,KAAKP,IAAL,CAAUO,YADS;AAEjCC,MAAAA,gBAAgB,EAAE,KAAKR,IAAL,CAAUQ,gBAFK;AAGjCC,MAAAA,mBAAmB,EAAE,KAAKT,IAAL,CAAUS,mBAHE;AAIjCC,MAAAA,oBAAoB,EAAE,KAAKV,IAAL,CAAUU,oBAJC;AAKjCJ,MAAAA,QAAQ,EAAE,OALuB;AAMjCK,MAAAA,QAAQ,EAAE,KAAKV;AANkB,KAAnB,CAAhB;AASA,SAAKW,aAAL,GAAqBjB,MAArB;AAEA,SAAKkB,QAAL;AACA,SAAKX,KAAL,GAAa,KAAKY,IAAL,CAAU,uBAAV,CAAb;AAEA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYD,IAAZ,CAAiB,IAAjB,CAAd;AACD;;AAEDE,EAAAA,OAAO,GAAI;AACT,SAAKC,IAAL,GAAY,IAAIzB,kBAAJ,CAAuB,IAAvB,EAA6B;AACvCY,MAAAA,QAAQ,EAAE,KAAKA;AADwB,KAA7B,CAAZ;AAIA,UAAM;AAAEc,MAAAA;AAAF,QAAa,KAAKpB,IAAxB;;AACA,QAAIoB,MAAJ,EAAY;AACV,WAAKC,KAAL,CAAWD,MAAX,EAAmB,IAAnB;AACD;AACF;;AAEDE,EAAAA,SAAS,GAAI;AACX,SAAKH,IAAL,CAAUI,QAAV;AACA,SAAKC,OAAL;AACD;;AAEDT,EAAAA,aAAa,GAAI;AACf,WAAOU,OAAO,CAACC,GAAR,CAAY,CACjB,KAAKpB,QAAL,CAAcqB,iBAAd,EADiB,EAEjB,KAAKR,IAAL,CAAUS,SAAV,CAAoB,MAApB,EAA4B,GAA5B,CAFiB,CAAZ,CAAP;AAID;;AAEDX,EAAAA,MAAM,CAAEY,KAAF,EAAS;AACb,WAAO,KAAKV,IAAL,CAAUF,MAAV,CAAiBY,KAAjB,CAAP;AACD;;AA5E+C;;AAA7BjC,W,CACZkC,O,GAAUrC,WAAW,CAACsC,O;iBADVnC,W","sourcesContent":["import { UIPlugin } from '@uppy/core'\nimport { Provider } from '@uppy/companion-client'\nimport { h } from 'preact'\n\nimport packageJson from '../package.json'\nimport DriveProviderViews from './DriveProviderViews.js'\nimport locale from './locale.js'\n\nexport default class GoogleDrive extends UIPlugin {\n  static VERSION = packageJson.version\n\n  constructor (uppy, opts) {\n    super(uppy, opts)\n    this.id = this.opts.id || 'GoogleDrive'\n    this.title = this.opts.title || 'Google Drive'\n    Provider.initPlugin(this, opts)\n    this.title = this.opts.title || 'Google Drive'\n    this.icon = () => (\n      <svg\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        width=\"32\"\n        height=\"32\"\n        viewBox=\"0 0 32 32\"\n      >\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <rect\n            className=\"uppy-ProviderIconBg\"\n            fill=\"#4285F4\"\n            width=\"32\"\n            height=\"32\"\n            rx=\"16\"\n          />\n          <path\n            d=\"M25.216 17.736L19.043 7h-6.086l6.175 10.736h6.084zm-11.275.896L10.9 24h11.723l3.04-5.368H13.942zm-1.789-10.29l-5.816 10.29L9.38 24l5.905-10.29-3.132-5.369z\"\n            fill=\"#FFF\"\n          />\n        </g>\n      </svg>\n    )\n\n    this.provider = new Provider(uppy, {\n      companionUrl: this.opts.companionUrl,\n      companionHeaders: this.opts.companionHeaders,\n      companionKeysParams: this.opts.companionKeysParams,\n      companionCookiesRule: this.opts.companionCookiesRule,\n      provider: 'drive',\n      pluginId: this.id,\n    })\n\n    this.defaultLocale = locale\n\n    this.i18nInit()\n    this.title = this.i18n('pluginNameGoogleDrive')\n\n    this.onFirstRender = this.onFirstRender.bind(this)\n    this.render = this.render.bind(this)\n  }\n\n  install () {\n    this.view = new DriveProviderViews(this, {\n      provider: this.provider,\n    })\n\n    const { target } = this.opts\n    if (target) {\n      this.mount(target, this)\n    }\n  }\n\n  uninstall () {\n    this.view.tearDown()\n    this.unmount()\n  }\n\n  onFirstRender () {\n    return Promise.all([\n      this.provider.fetchPreAuthToken(),\n      this.view.getFolder('root', '/'),\n    ])\n  }\n\n  render (state) {\n    return this.view.render(state)\n  }\n}\n"]}