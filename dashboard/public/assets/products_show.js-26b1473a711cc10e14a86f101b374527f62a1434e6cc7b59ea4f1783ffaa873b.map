{
  "version": 3,
  "sources": ["../../javascript/packs/products_show.js"],
  "sourcesContent": ["'use strict';\n\nconst id = 'product_cli_modal';\nconst spinnerId = `${id}_spinner`;\nconst headerId = `${id}_header`;\nconst buttonId = `${id}_button`;\nconst closeButton = `<button id=\"${buttonId}\" class=\"close float-right\" data-dismiss=\"modal\">&times;</button>`;\n\njQuery(function(){\n  $('[data-toggle=\"cli\"]').on('click', (event) => updateModal(event));\n\n  $(`#${headerId}`).replaceWith(`\n    <h2>\n      <span>no action</pan>\n      ${closeButton}\n    </h2>\n  `);\n});\n\nfunction updateModal(event){\n  const button = $(`#${event.target['id']}`);\n  if(button === undefined || button.data() === {}) { return; }\n\n  const title = button.data('title');\n  const cmd = button.data('cmd');\n  const target = button.data('target');\n  const header = `\\$ <code><strong>${cmd}</strong></code>\\n`\n\n  $(`#${headerId}`).replaceWith(`\n    <h2>\n      <span>${title}</pan>\n      ${closeButton}\n    </h2>\n  `);\n\n  const xhr = new XMLHttpRequest;\n  xhr.onreadystatechange = function() {\n    if(this.status == 200){\n      $(`#${id} .product-cli-body`).html(`${header}${this.responseText}`);\n      $(`#${id} .product-cli-body`).scrollTop($(`#${id} .product-cli-body`)[0].scrollHeight);\n    }\n  };\n\n  xhr.onloadend = function() {\n    $(`#${spinnerId}`).replaceWith(`\n      <button class=\"close float-right\" data-dismiss=\"modal\">&times;</button>\n    `);\n    if (this.status != 200) {\n      $(`#${id} .product-cli-body`).html(`${header}A fatal error has occurred`);\n    };\n  };\n\n  xhr.open('PATCH', target);\n  xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'))\n  xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  xhr.send();\n  // FIXMME: using window here bc modal is a bootstrap import and there are multiple\n  // $ and jQuery's out there.\n  window.jQuery(`#${id}`).modal('show');\n}\n"],
  "mappings": "AAEA,IAAMA,EAAK,oBACLC,EAAY,GAAGD,YACfE,EAAW,GAAGF,WACdG,EAAW,GAAGH,WACdI,EAAc,eAAeD,qEAEnC,OAAO,UAAU,CACf,EAAE,qBAAqB,EAAE,GAAG,QAAUE,GAAUC,EAAYD,CAAK,CAAC,EAElE,EAAE,IAAIH,GAAU,EAAE,YAAY;AAAA;AAAA;AAAA,QAGxBE;AAAA;AAAA,GAEL,CACH,CAAC,EAED,SAASE,EAAYD,EAAM,CACzB,IAAME,EAAS,EAAE,IAAIF,EAAM,OAAO,IAAO,EACzC,GAAGE,IAAW,QAAaA,EAAO,KAAK,IAAM,CAAC,EAAK,OAEnD,IAAMC,EAAQD,EAAO,KAAK,OAAO,EAC3BE,EAAMF,EAAO,KAAK,KAAK,EACvBG,EAASH,EAAO,KAAK,QAAQ,EAC7BI,EAAS,mBAAoBF;AAAA,EAEnC,EAAE,IAAIP,GAAU,EAAE,YAAY;AAAA;AAAA,cAElBM;AAAA,QACNJ;AAAA;AAAA,GAEL,EAED,IAAMQ,EAAM,IAAI,eAChBA,EAAI,mBAAqB,UAAW,CAC/B,KAAK,QAAU,MAChB,EAAE,IAAIZ,qBAAsB,EAAE,KAAK,GAAGW,IAAS,KAAK,cAAc,EAClE,EAAE,IAAIX,qBAAsB,EAAE,UAAU,EAAE,IAAIA,qBAAsB,EAAE,GAAG,YAAY,EAEzF,EAEAY,EAAI,UAAY,UAAW,CACzB,EAAE,IAAIX,GAAW,EAAE,YAAY;AAAA;AAAA,KAE9B,EACG,KAAK,QAAU,KACjB,EAAE,IAAID,qBAAsB,EAAE,KAAK,GAAGW,6BAAkC,CAE5E,EAEAC,EAAI,KAAK,QAASF,CAAM,EACxBE,EAAI,iBAAiB,eAAgB,EAAE,yBAAyB,EAAE,KAAK,SAAS,CAAC,EACjFA,EAAI,iBAAiB,mBAAoB,gBAAgB,EACzDA,EAAI,KAAK,EAGT,OAAO,OAAO,IAAIZ,GAAI,EAAE,MAAM,MAAM,CACtC",
  "names": ["id", "spinnerId", "headerId", "buttonId", "closeButton", "event", "updateModal", "button", "title", "cmd", "target", "header", "xhr"]
}
